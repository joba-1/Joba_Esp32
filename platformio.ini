; platformio.ini

[platformio]
default_envs = serial

; ============================================
; Shared configuration for all environments
; ============================================
[env]
platform = https://github.com/pioarduino/platform-espressif32/releases/download/54.03.20/platform-espressif32.zip
board = esp32dev
framework = arduino
monitor_speed = 115200

; Library dependencies
lib_deps = 
    tzapu/WiFiManager@^2.0.17
    me-no-dev/ESPAsyncWebServer@^1.2.4
    me-no-dev/AsyncTCP@^1.1.1

; Common build flags
build_flags = 
    ; Logging configuration
    -D LOG_BAUD_RATE=115200
    -D LOG_LEVEL=4
    -D LOG_ENABLE_TIMESTAMP=true
    
    ; WiFi configuration
    -D WIFI_AP_NAME=\"ESP32-Config\"
    -D WIFI_AP_PASSWORD=\"\"
    -D WIFI_CONFIG_PORTAL_TIMEOUT=180
    
    ; NTP / Time configuration
    -D NTP_SERVER1=\"pool.ntp.org\"
    -D NTP_SERVER2=\"time.nist.gov\"
    -D TIMEZONE=\"CET-1CEST,M3.5.0,M10.5.0/3\"
    -D NTP_SYNC_INTERVAL=3600000
    
    ; Web server configuration
    -D WEBSERVER_PORT=80
    -D WEBSERVER_USERNAME=\"admin\"
    -D WEBSERVER_PASSWORD=\"admin\"
    
    ; OTA configuration
    -D OTA_HOSTNAME=\"esp32-device\"
    -D OTA_PASSWORD=\"otapassword\"
    -D OTA_PORT=3232

; ============================================
; Serial upload environment
; ============================================
[env:serial]
upload_protocol = esptool
upload_port = /dev/ttyUSB0
; Alternatively auto-detect:
; upload_port = /dev/ttyUSB*

; ============================================
; OTA upload environment
; ============================================
[env:ota]
upload_protocol = espota
upload_port = esp32-device.local
; Or use IP address:
; upload_port = 192.168.1.100
upload_flags = 
    --port=3232
    --auth=otapassword
